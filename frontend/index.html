<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Concept Explorer // Retro</title>-->
<!--    <script src="https://cdn.tailwindcss.com"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>-->
<!--    <link rel="preconnect" href="https://fonts.googleapis.com">-->
<!--    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>-->
<!--    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&display=swap" rel="stylesheet">-->

<!--    <style>-->
<!--        /* -&#45;&#45; Retro Theme Variables -&#45;&#45; */-->
<!--        :root {-->
<!--            &#45;&#45;bg-color: #1a202c; /* Tailwind gray-900 */-->
<!--            &#45;&#45;text-color: #e2e8f0; /* Tailwind gray-300 */-->
<!--            &#45;&#45;primary-color: #4fd1c5; /* Tailwind teal-400 */-->
<!--            &#45;&#45;secondary-color: #f6e05e; /* Tailwind yellow-400 */-->
<!--            &#45;&#45;accent-color: #f687b3; /* Tailwind pink-400 */-->
<!--            &#45;&#45;border-color: #4a5568; /* Tailwind gray-600 */-->
<!--            &#45;&#45;input-bg: #2d3748; /* Tailwind gray-800 */-->
<!--            &#45;&#45;input-text: var(&#45;&#45;text-color);-->
<!--            &#45;&#45;input-border: var(&#45;&#45;border-color);-->
<!--            &#45;&#45;input-focus-border: var(&#45;&#45;primary-color);-->
<!--            &#45;&#45;status-info-bg: rgba(79, 209, 197, 0.1); /* Teal bg subtle */-->
<!--            &#45;&#45;status-info-border: var(&#45;&#45;primary-color);-->
<!--            &#45;&#45;status-info-text: var(&#45;&#45;primary-color);-->
<!--            &#45;&#45;status-error-bg: rgba(246, 135, 179, 0.1); /* Pink bg subtle */-->
<!--            &#45;&#45;status-error-border: var(&#45;&#45;accent-color);-->
<!--            &#45;&#45;status-error-text: var(&#45;&#45;accent-color);-->
<!--            &#45;&#45;status-success-bg: rgba(246, 224, 94, 0.1); /* Yellow bg subtle */-->
<!--            &#45;&#45;status-success-border: var(&#45;&#45;secondary-color);-->
<!--            &#45;&#45;status-success-text: var(&#45;&#45;secondary-color);-->
<!--            &#45;&#45;font-mono: 'IBM Plex Mono', monospace;-->
<!--        }-->

<!--        body {-->
<!--            background-color: var(&#45;&#45;bg-color);-->
<!--            color: var(&#45;&#45;text-color);-->
<!--            font-family: var(&#45;&#45;font-mono);-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            min-height: 100vh;-->
<!--            overflow-x: hidden;-->
<!--        }-->

<!--        /* -&#45;&#45; Layout & Header -&#45;&#45; */-->
<!--        .app-header {-->
<!--            background-color: var(&#45;&#45;bg-color);-->
<!--            border-bottom: 1px solid var(&#45;&#45;border-color);-->
<!--            padding: 0.75rem 1.5rem;-->
<!--            transition: padding 0.3s ease-in-out;-->
<!--            flex-shrink: 0;-->
<!--            position: sticky;-->
<!--            top: 0;-->
<!--            z-index: 10;-->
<!--        }-->
<!--        .app-header.header-shrunk {-->
<!--            padding-top: 0.25rem;-->
<!--            padding-bottom: 0.25rem;-->
<!--        }-->
<!--        .header-title {-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--            font-weight: 700;-->
<!--            letter-spacing: 0.05em;-->
<!--        }-->
<!--        .settings-toggle-btn, .search-btn, .clear-cache-btn, .download-btn { /* Shared button styles */-->
<!--            background: none;-->
<!--            border: 1px solid var(&#45;&#45;border-color);-->
<!--            color: var(&#45;&#45;text-color);-->
<!--            padding: 0.3rem 0.8rem;-->
<!--            border-radius: 4px;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.2s ease;-->
<!--            font-family: var(&#45;&#45;font-mono);-->
<!--            font-size: 0.9rem;-->
<!--            margin-left: 0.5rem; /* Spacing between buttons */-->
<!--        }-->
<!--        .settings-toggle-btn:hover, .search-btn:hover, .clear-cache-btn:hover, .download-btn:hover {-->
<!--            border-color: var(&#45;&#45;primary-color);-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--        }-->
<!--        .clear-cache-btn {-->
<!--             border-color: var(&#45;&#45;accent-color);-->
<!--             color: var(&#45;&#45;accent-color);-->
<!--        }-->
<!--         .clear-cache-btn:hover {-->
<!--             border-color: var(&#45;&#45;accent-color);-->
<!--             color: var(&#45;&#45;bg-color);-->
<!--             background-color: var(&#45;&#45;accent-color);-->
<!--         }-->
<!--         .download-btn {-->
<!--             border-color: var(&#45;&#45;secondary-color);-->
<!--             color: var(&#45;&#45;secondary-color);-->
<!--         }-->
<!--         .download-btn:hover {-->
<!--             border-color: var(&#45;&#45;secondary-color);-->
<!--             color: var(&#45;&#45;bg-color);-->
<!--             background-color: var(&#45;&#45;secondary-color);-->
<!--         }-->

<!--        /* -&#45;&#45; Search Input -&#45;&#45; */-->
<!--        .search-input {-->
<!--             background-color: var(&#45;&#45;input-bg);-->
<!--             border: 1px solid var(&#45;&#45;border-color);-->
<!--             color: var(&#45;&#45;input-text);-->
<!--             padding: 0.3rem 0.6rem;-->
<!--             border-radius: 4px;-->
<!--             font-size: 0.9rem;-->
<!--             width: 150px; /* Adjust as needed */-->
<!--             transition: all 0.2s ease;-->
<!--        }-->
<!--        .search-input:focus {-->
<!--             outline: none;-->
<!--             border-color: var(&#45;&#45;primary-color);-->
<!--             box-shadow: 0 0 0 2px rgba(79, 209, 197, 0.3);-->
<!--        }-->

<!--        /* -&#45;&#45; Settings Panel -&#45;&#45; */-->
<!--        #settings-panel {-->
<!--            background-color: rgba(45, 55, 72, 0.8);-->
<!--            backdrop-filter: blur(5px);-->
<!--            border-bottom: 1px solid var(&#45;&#45;border-color);-->
<!--            max-height: 0;-->
<!--            overflow: hidden;-->
<!--            transition: max-height 0.5s ease-out, padding 0.5s ease-out;-->
<!--            padding: 0 1.5rem;-->
<!--            position: sticky;-->
<!--            top: 50px; /* Initial sticky top */-->
<!--            z-index: 9;-->
<!--        }-->
<!--        .app-header.header-shrunk + #settings-panel {-->
<!--             top: 36px; /* Adjusted sticky top */-->
<!--        }-->
<!--        #settings-panel.settings-panel-visible {-->
<!--            max-height: 500px;-->
<!--            padding: 1.5rem;-->
<!--        }-->

<!--        /* -&#45;&#45; Inputs & Buttons -&#45;&#45; */-->
<!--        .input-label {-->
<!--            font-weight: 500;-->
<!--            margin-bottom: 0.25rem;-->
<!--            display: block;-->
<!--            color: var(&#45;&#45;text-color);-->
<!--            font-size: 0.9rem;-->
<!--        }-->
<!--         .input-field {-->
<!--            width: 100%;-->
<!--            padding: 0.5rem 0.75rem;-->
<!--            background-color: var(&#45;&#45;input-bg);-->
<!--            color: var(&#45;&#45;input-text);-->
<!--            border: 1px solid var(&#45;&#45;input-border);-->
<!--            border-radius: 4px;-->
<!--            font-family: var(&#45;&#45;font-mono);-->
<!--            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;-->
<!--         }-->
<!--         .input-field::placeholder {-->
<!--             color: #718096;-->
<!--             opacity: 0.8;-->
<!--         }-->
<!--         .input-field:focus {-->
<!--            outline: none;-->
<!--            border-color: var(&#45;&#45;input-focus-border);-->
<!--            box-shadow: 0 0 0 2px rgba(79, 209, 197, 0.3);-->
<!--         }-->
<!--         .btn-primary {-->
<!--            padding: 0.6rem 1.5rem;-->
<!--            background-color: var(&#45;&#45;primary-color);-->
<!--            color: var(&#45;&#45;bg-color);-->
<!--            border: none;-->
<!--            border-radius: 4px;-->
<!--            font-weight: 700;-->
<!--            font-family: var(&#45;&#45;font-mono);-->
<!--            cursor: pointer;-->
<!--            transition: all 0.2s ease-in-out;-->
<!--            letter-spacing: 0.05em;-->
<!--         }-->
<!--         .btn-primary:hover {-->
<!--            filter: brightness(1.1);-->
<!--            box-shadow: 0 0 10px rgba(79, 209, 197, 0.5);-->
<!--         }-->
<!--         .btn-primary:disabled {-->
<!--             background-color: var(&#45;&#45;border-color);-->
<!--             color: #a0aec0;-->
<!--             cursor: not-allowed;-->
<!--             filter: none;-->
<!--             box-shadow: none;-->
<!--         }-->

<!--        /* -&#45;&#45; Status Area -&#45;&#45; */-->
<!--         #status-area {-->
<!--             margin: 1rem 1.5rem;-->
<!--             padding: 0.75rem 1rem;-->
<!--             border-radius: 4px;-->
<!--             font-weight: 500;-->
<!--             font-size: 0.9rem;-->
<!--             min-height: 40px;-->
<!--             border: 1px dashed var(&#45;&#45;border-color);-->
<!--             transition: all 0.3s ease;-->
<!--             flex-shrink: 0;-->
<!--         }-->
<!--         .status-info {-->
<!--             border-color: var(&#45;&#45;status-info-border);-->
<!--             background-color: var(&#45;&#45;status-info-bg);-->
<!--             color: var(&#45;&#45;status-info-text);-->
<!--         }-->
<!--          .status-error {-->
<!--             border-color: var(&#45;&#45;status-error-border);-->
<!--             background-color: var(&#45;&#45;status-error-bg);-->
<!--             color: var(&#45;&#45;status-error-text);-->
<!--         }-->
<!--         .status-success {-->
<!--              border-color: var(&#45;&#45;status-success-border);-->
<!--              background-color: var(&#45;&#45;status-success-bg);-->
<!--              color: var(&#45;&#45;status-success-text);-->
<!--         }-->

<!--        /* -&#45;&#45; Chart Container -&#45;&#45; */-->
<!--        main {-->
<!--            flex-grow: 1;-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            padding: 0 1.5rem 1.5rem;-->
<!--        }-->
<!--        #chart-container {-->
<!--            width: 100%;-->
<!--            flex-grow: 1;-->
<!--            min-height: 400px;-->
<!--            border: 1px solid var(&#45;&#45;border-color);-->
<!--            border-radius: 0;-->
<!--            background-color: var(&#45;&#45;input-bg);-->
<!--        }-->

<!--        /* -&#45;&#45; Footer -&#45;&#45; */-->
<!--        .app-footer {-->
<!--            padding: 0.75rem 1.5rem;-->
<!--            text-align: center;-->
<!--            font-size: 0.8rem;-->
<!--            color: #a0aec0;-->
<!--            border-top: 1px solid var(&#45;&#45;border-color);-->
<!--            flex-shrink: 0;-->
<!--            display: flex; /* Use flexbox for footer items */-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            gap: 1rem; /* Spacing between footer items */-->
<!--            flex-wrap: wrap; /* Allow wrapping on small screens */-->
<!--        }-->

<!--        /* -&#45;&#45; Blinking Cursor Effect -&#45;&#45; */-->
<!--        .blinking-cursor::after {-->
<!--            content: '_';-->
<!--            animation: blink 1s step-end infinite;-->
<!--            margin-left: 2px;-->
<!--            opacity: 1;-->
<!--            color: var(&#45;&#45;primary-color);-->
<!--        }-->
<!--        @keyframes blink {-->
<!--            50% { opacity: 0; }-->
<!--        }-->

<!--        /* Hide initially */-->
<!--        #clear-cache-button { display: none; }-->

<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <header id="app-header" class="app-header flex justify-between items-center flex-wrap gap-2">-->
<!--        <h1 class="header-title text-lg md:text-xl">Concept_Explorer<span class="blinking-cursor"></span></h1>-->
<!--        <div class="flex items-center gap-2 flex-wrap">-->
<!--            <div class="flex items-center">-->
<!--                 <label for="search-input" class="sr-only">Search Node:</label>-->
<!--                 <input type="text" id="search-input" placeholder="Search node..." class="search-input">-->
<!--                 <button id="search-button" class="search-btn">Find</button>-->
<!--            </div>-->
<!--            <button id="settings-toggle" class="settings-toggle-btn">[ Settings ]</button>-->
<!--        </div>-->
<!--    </header>-->

<!--    <div id="settings-panel">-->
<!--        <form id="exploration-form" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-4 gap-y-3">-->
<!--            <div>-->
<!--                <label for="root_concept" class="input-label">Root Concept:</label>-->
<!--                <input type="text" id="root_concept" name="root_concept" value="Revenue Recognition ASC 606" class="input-field" required>-->
<!--            </div>-->
<!--            <div>-->
<!--                <label for="provider" class="input-label">Provider:</label>-->
<!--                <select id="provider" name="provider" class="input-field" required>-->
<!--                    <option value="gemini" selected>Gemini</option>-->
<!--                    <option value="openai">OpenAI</option>-->
<!--                </select>-->
<!--            </div>-->
<!--            <div>-->
<!--                <label for="model" class="input-label">Model Name:</label>-->
<!--                <input type="text" id="model" name="model" placeholder="Default" class="input-field">-->
<!--                 <p class="text-xs text-gray-500 mt-1">Leave blank for default</p>-->
<!--            </div>-->
<!--            <div>-->
<!--                <label for="api_key" class="input-label">API Key:</label>-->
<!--                <input type="password" id="api_key" name="api_key" placeholder="Required if not set in .env" class="input-field">-->
<!--                 <p class="text-xs text-gray-500 mt-1">Sent with request</p>-->
<!--            </div>-->
<!--            <div class="flex flex-col">-->
<!--                 <label for="depth" class="input-label">Max Depth: <span id="depth-value" class="text-primary-color font-bold">3</span></label>-->
<!--                 <div class="flex items-center gap-2">-->
<!--                     <input type="range" id="depth-slider" name="depth-slider" min="1" max="8" value="3" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-color">-->
<!--                     <input type="number" id="depth" name="depth" value="3" min="1" max="8" class="input-field w-16 text-center" required>-->
<!--                 </div>-->
<!--            </div>-->
<!--             <div>-->
<!--                <label for="sleep_duration" class="input-label">Node Delay (s):</label>-->
<!--                <input type="number" id="sleep_duration" name="sleep_duration" value="0.2" min="0" max="5" step="0.1" class="input-field" required>-->
<!--            </div>-->
<!--            <div>-->
<!--                <label for="diversity" class="input-label">Diversity (0-1):</label>-->
<!--                <input type="number" id="diversity" name="diversity" value="0.8" min="0" max="1" step="0.1" class="input-field" required>-->
<!--            </div>-->
<!--            <div class="sm:col-span-2 lg:col-span-4 flex justify-center mt-2">-->
<!--                <button type="submit" id="start-button" class="btn-primary w-full sm:w-auto">Start Exploration</button>-->
<!--            </div>-->
<!--        </form>-->
<!--    </div>-->

<!--    <main>-->
<!--        <div id="status-area" class="status-info">-->
<!--            Configure settings and click "Start Exploration" or load data from cache if available.-->
<!--        </div>-->

<!--        <div id="chart-container"></div>-->
<!--    </main>-->

<!--    <footer class="app-footer">-->
<!--        <span>Concept Explorer // Powered by AI & ECharts</span>-->
<!--        <button id="download-json-button" class="download-btn text-xs">Download JSON</button>-->
<!--        <button id="download-png-button" class="download-btn text-xs">Download PNG</button>-->
<!--        <button id="clear-cache-button" class="clear-cache-btn text-xs">Clear Cache</button>-->
<!--    </footer>-->

<!--    <script src="/static/script.js"></script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concept Explorer // Retro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- Retro Theme Variables --- */
        :root {
            --bg-color: #1a202c; /* Tailwind gray-900 */
            --text-color: #e2e8f0; /* Tailwind gray-300 */
            --primary-color: #4fd1c5; /* Tailwind teal-400 */
            --secondary-color: #f6e05e; /* Tailwind yellow-400 */
            --accent-color: #f687b3; /* Tailwind pink-400 */
            --border-color: #4a5568; /* Tailwind gray-600 */
            --input-bg: #2d3748; /* Tailwind gray-800 */
            --input-text: var(--text-color);
            --input-border: var(--border-color);
            --input-focus-border: var(--primary-color);
            --status-info-bg: rgba(79, 209, 197, 0.1); /* Teal bg subtle */
            --status-info-border: var(--primary-color);
            --status-info-text: var(--primary-color);
            --status-error-bg: rgba(246, 135, 179, 0.1); /* Pink bg subtle */
            --status-error-border: var(--accent-color);
            --status-error-text: var(--accent-color);
            --status-success-bg: rgba(246, 224, 94, 0.1); /* Yellow bg subtle */
            --status-success-border: var(--secondary-color);
            --status-success-text: var(--secondary-color);
            --font-mono: 'IBM Plex Mono', monospace;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-mono);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- Layout & Header --- */
        .app-header {
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            padding: 0.75rem 1.5rem;
            transition: padding 0.3s ease-in-out;
            flex-shrink: 0;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .app-header.header-shrunk {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
        }
        .header-title {
            color: var(--primary-color);
            font-weight: 700;
            letter-spacing: 0.05em;
        }
        .settings-toggle-btn, .search-btn, .clear-cache-btn, .download-btn { /* Shared button styles */
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            margin-left: 0.5rem; /* Spacing between buttons */
        }
        .settings-toggle-btn:hover, .search-btn:hover, .clear-cache-btn:hover, .download-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        .clear-cache-btn { border-color: var(--accent-color); color: var(--accent-color); }
        .clear-cache-btn:hover { border-color: var(--accent-color); color: var(--bg-color); background-color: var(--accent-color); }
        .download-btn { border-color: var(--secondary-color); color: var(--secondary-color); }
        .download-btn:hover { border-color: var(--secondary-color); color: var(--bg-color); background-color: var(--secondary-color); }

        /* --- Search Input --- */
        .search-input {
             background-color: var(--input-bg); border: 1px solid var(--border-color); color: var(--input-text);
             padding: 0.3rem 0.6rem; border-radius: 4px; font-size: 0.9rem; width: 150px; transition: all 0.2s ease;
        }
        .search-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(79, 209, 197, 0.3); }

        /* --- Hero Section --- */
        .hero-section {
            padding: 1rem 1.5rem; /* Adjust padding */
            background-color: var(--input-bg); /* Match input background */
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0; /* Prevent shrinking */
        }
        .hero-input { /* Style for the main root concept input */
             text-align: center;
             font-size: 1rem; /* Slightly larger */
             padding: 0.6rem 0.75rem;
             flex-grow: 1; /* Allow input to grow */
             max-width: 600px; /* Limit max width */
        }
        .hero-button { /* Style for the main start button */
             padding: 0.6rem 1.5rem; /* Match primary button */
             font-size: 1rem;
        }


        /* --- Settings Panel --- */
        #settings-panel {
            background-color: rgba(45, 55, 72, 0.8); backdrop-filter: blur(5px); border-bottom: 1px solid var(--border-color);
            max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out, padding 0.5s ease-out; padding: 0 1.5rem;
            position: sticky; top: 50px; z-index: 9;
        }
        .app-header.header-shrunk + .hero-section + #settings-panel { top: 36px + 61px; /* Shrunk Header + Hero Section Height (approx) */ } /* Adjust sticky top */
        .hero-section + #settings-panel { top: 50px + 61px; /* Normal Header + Hero Section Height (approx) */ } /* Adjust sticky top */

        #settings-panel.settings-panel-visible { max-height: 500px; padding: 1.5rem; }

        /* --- Inputs & Buttons --- */
        .input-label { font-weight: 500; margin-bottom: 0.25rem; display: block; color: var(--text-color); font-size: 0.9rem; }
        .input-field { width: 100%; padding: 0.5rem 0.75rem; background-color: var(--input-bg); color: var(--input-text); border: 1px solid var(--input-border); border-radius: 4px; font-family: var(--font-mono); transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .input-field::placeholder { color: #718096; opacity: 0.8; }
        .input-field:focus { outline: none; border-color: var(--input-focus-border); box-shadow: 0 0 0 2px rgba(79, 209, 197, 0.3); }
        .btn-primary { padding: 0.6rem 1.5rem; background-color: var(--primary-color); color: var(--bg-color); border: none; border-radius: 4px; font-weight: 700; font-family: var(--font-mono); cursor: pointer; transition: all 0.2s ease-in-out; letter-spacing: 0.05em; }
        .btn-primary:hover { filter: brightness(1.1); box-shadow: 0 0 10px rgba(79, 209, 197, 0.5); }
        .btn-primary:disabled { background-color: var(--border-color); color: #a0aec0; cursor: not-allowed; filter: none; box-shadow: none; }

        /* --- Status Area --- */
         #status-area { margin: 1rem 1.5rem; padding: 0.75rem 1rem; border-radius: 4px; font-weight: 500; font-size: 0.9rem; min-height: 40px; border: 1px dashed var(--border-color); transition: all 0.3s ease; flex-shrink: 0; }
         .status-info { border-color: var(--status-info-border); background-color: var(--status-info-bg); color: var(--status-info-text); }
         .status-error { border-color: var(--status-error-border); background-color: var(--status-error-bg); color: var(--status-error-text); }
         .status-success { border-color: var(--status-success-border); background-color: var(--status-success-bg); color: var(--status-success-text); }

        /* --- Chart Container --- */
        main { flex-grow: 1; display: flex; flex-direction: column; padding: 0 1.5rem 1.5rem; }
        #chart-container { width: 100%; flex-grow: 1; min-height: 400px; border: 1px solid var(--border-color); border-radius: 0; background-color: var(--input-bg); }

        /* --- Footer --- */
        .app-footer { padding: 0.75rem 1.5rem; text-align: center; font-size: 0.8rem; color: #a0aec0; border-top: 1px solid var(--border-color); flex-shrink: 0; display: flex; justify-content: center; align-items: center; gap: 1rem; flex-wrap: wrap; }

        /* --- Blinking Cursor Effect --- */
        .blinking-cursor::after { content: '_'; animation: blink 1s step-end infinite; margin-left: 2px; opacity: 1; color: var(--primary-color); }
        @keyframes blink { 50% { opacity: 0; } }

        /* Hide initially */
        #clear-cache-button { display: none; }

    </style>
</head>
<body>
    <header id="app-header" class="app-header flex justify-between items-center flex-wrap gap-2">
        <h1 class="header-title text-lg md:text-xl">Concept_Explorer<span class="blinking-cursor"></span></h1>
        <div class="flex items-center gap-2 flex-wrap">
            <div class="flex items-center">
                 <label for="search-input" class="sr-only">Search Node:</label>
                 <input type="text" id="search-input" placeholder="Search node..." class="search-input">
                 <button id="search-button" class="search-btn">Find</button>
            </div>
            <button id="settings-toggle" class="settings-toggle-btn">[ Settings ]</button>
        </div>
    </header>

    <section class="hero-section flex items-center justify-center gap-2">
         <label for="root_concept_hero" class="sr-only">Root Concept:</label>
         <input type="text" id="root_concept_hero" placeholder="Enter root concept..." class="input-field hero-input" required>
         <button id="start-button-hero" class="btn-primary hero-button">Explore</button>
    </section>

    <div id="settings-panel">
        <form id="exploration-form" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-3"> <div>
                <label for="provider" class="input-label">Provider:</label>
                <select id="provider" name="provider" class="input-field" required>
                    <option value="gemini" selected>Gemini</option>
                    <option value="openai">OpenAI</option>
                </select>
            </div>
            <div>
                <label for="model" class="input-label">Model Name (Optional):</label>
                <input type="text" id="model" name="model" placeholder="Backend Default" class="input-field">
                 <p class="text-xs text-gray-500 mt-1">Overrides backend default</p>
            </div>
            <div>
                <label for="api_key" class="input-label">API Key (Optional):</label>
                <input type="password" id="api_key" name="api_key" placeholder="Backend Default" class="input-field">
                 <p class="text-xs text-gray-500 mt-1">Overrides backend default</p>
            </div>
            <div class="flex flex-col">
                 <label for="depth" class="input-label">Max Depth: <span id="depth-value" class="text-primary-color font-bold">3</span></label>
                 <div class="flex items-center gap-2">
                     <input type="range" id="depth-slider" name="depth-slider" min="1" max="8" value="3" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary-color">
                     <input type="number" id="depth" name="depth" value="3" min="1" max="8" class="input-field w-16 text-center" required>
                 </div>
            </div>
             <div>
                <label for="sleep_duration" class="input-label">Node Delay (s):</label>
                <input type="number" id="sleep_duration" name="sleep_duration" value="0.2" min="0" max="5" step="0.1" class="input-field" required>
            </div>
            <div>
                <label for="diversity" class="input-label">Diversity (0-1):</label>
                <input type="number" id="diversity" name="diversity" value="0.8" min="0" max="1" step="0.1" class="input-field" required>
            </div>
            </form>
    </div>

    <main>
        <div id="status-area" class="status-info">
            Enter a root concept to start exploring, or load data from cache if available.
        </div>

        <div id="chart-container"></div>
    </main>

    <footer class="app-footer">
        <span>Concept Explorer // Powered by AI & ECharts</span>
        <button id="download-json-button" class="download-btn text-xs">Download JSON</button>
        <button id="download-png-button" class="download-btn text-xs">Download PNG</button>
        <button id="clear-cache-button" class="clear-cache-btn text-xs">Clear Cache</button>
    </footer>

    <script src="/static/script.js"></script>
</body>
</html>


